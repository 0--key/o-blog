<lisp>(ob:insert-template "page_header.html")</lisp>
<article>
  <header class="article-header">
    <div class="date">
      <span class="date-d"><lisp>(ob:format-date (ob:post-timestamp POST) "%d")</lisp></span>
      <span class="date-m"><lisp>
	  (format "<a href=\"%s/%s/%s/%s/index.html\">%s</a>"
	  (ob:path-to-root)
	  (ob:post-category POST)
	  (ob:format-date (ob:post-timestamp POST) "%Y")
	  (ob:format-date (ob:post-timestamp POST) "%m")
	  (ob:format-date (ob:post-timestamp POST) "%b"))</lisp></span>
      <span class="date-y"><lisp>
	  <lisp>
	    (format "<a href=\"%s/%s/%s/index.html\">%s</a>"
	    (ob:path-to-root)
	    (ob:post-category POST)
	    (ob:format-date (ob:post-timestamp POST) "%Y")
	    (ob:format-date (ob:post-timestamp POST) "%Y"))</lisp></span>
    </div>
    <h1><lisp>(ob:post-title POST)</lisp></h1>
    <nav class="articles-nav">
      <ul>
	<lisp>
	  (progn
	  (let ((ppost (ob:get-post-by-id (1+ (ob:post-id POST)))))
	  (if ppost
	  (insert (format "<li class=\"prev\"><a href=\"%s/%s\">%s</a></li>"
	    (ob:path-to-root)
	    (ob:post-htmlfile ppost)
	    (ob:post-title ppost)))
	    (insert "<li>&nbsp;</li>")))
	  (let ((npost (ob:get-post-by-id (1- (ob:post-id POST)))))
	  (if npost
	  (insert (format "<li class=\"next\"><a href=\"%s/%s\">%s</a></li>"
	  (ob:path-to-root)
	  (ob:post-htmlfile npost)
	  (ob:post-title npost)))
	  (insert "<li>&nbsp;</li>"))))
	</lisp>
      </ul>
    </nav>

  </header>
  <div class="article-content">
    <lisp>(ob:post-content-html POST)</lisp>
  </div>
  
  <footer class="article-footer">
    Posted on <time datetime="<lisp> (ob:format-date (ob:post-timestamp POST)) </lisp>">
      <lisp> (ob:format-date (ob:post-timestamp POST) "%A %B, %d %Y at %H:%M:%S") </lisp>
    </time>.
    <nav class="tag-cloud">
      <h1>related tags</h1>
      <ul>
	<lisp>
	  (loop for tag in (ob:post-tags POST)
	  do (insert (format "<li><a href=\"%s/tags/%s.html\">%s</a></li>"
	  (ob:path-to-root)tag tag)))
	</lisp>
      </ul>
    </nav>
  </footer>
</article>
<lisp>(ob:insert-template "page_footer.html")</lisp>
